<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Service Integration in Gluu CE - Gluu Docs</title>
      
<link href="../../assets/stylesheets/font.css" rel="stylesheet">
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Gluu Docs">
    <meta property="og:image" content="None/../../gluu.jpg">
    <meta name="apple-mobile-web-app-title" content="Gluu Docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../../gluu.jpg">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-60feabe0e5.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-60feabe0e5.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-f58e216493.css">
    
    <link rel="stylesheet" href="../../assets/stylesheets/zenburn-28d5b94970.css">
    
      
      
      
      <link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto Sans:400,700|Source+Code+Pro">
      <style>
        body, input {
          font-family: 'Noto Sans', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../../assets/javascripts/modernizr-4a5cc7e01e.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Administration Guide <i class="icon icon-link"></i>
              
            
          </span>
        
        Service Integration in Gluu CE
      </div>
    </div>
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" placeholder="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">

  
  <a href="https://github.com/GluuFederation/docs" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../gluu.jpg">
        </div>
      
      <div class="name">
        <strong>Gluu Docs</strong><br>
        version: 3.0.0
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      <ul class="repo">
        
        <li class="home">
          <a href="/" title="Home">
            <div class="home-image">
            <i class="fa fa-home"></i> Doc Home</div>
          </a>
        </li>
        
        
        
        <li class="repo-download">
          
          <a href="https://github.com/GluuFederation/docs/archive/3.0.0.zip" target="_blank" title="Download" data-action="download">
            <i class="icon icon-download"></i> Download
          </a>
        </li>
        
      </ul>
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="../..">
      Home
    </a>
    
  </li>
                  
          
            
  <li>
    <span class="section">Installation Guide</span>
    <ul>
      
        
  <li>
    <a class="" title="Preparing VM" href="../../installation-guide/">
      Preparing VM
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Install Gluu Server" href="../../installation-guide/install/">
      Install Gluu Server
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Setup Script Options" href="../../installation-guide/setup_py/">
      Setup Script Options
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Cluster with CE" href="../../installation-guide/cluster/">
      Cluster with CE
    </a>
    
  </li>
                  
      
    </ul>
  </li>
                  
          
            
  <li>
    <span class="section">Upgrade/Patch Guide</span>
    <ul>
      
        
  <li>
    <a class="" title="Upgrade Gluu Server" href="../../upgrade/">
      Upgrade Gluu Server
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Patch Gluu Server" href="../../upgrade/update/">
      Patch Gluu Server
    </a>
    
  </li>
                  
      
    </ul>
  </li>
                  
          
            
  <li>
    <span class="section">Administration Guide</span>
    <ul>
      
        
  <li>
    <a class="" title="Gluu Server UI" href="../">
      Gluu Server UI
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Authentication Protocols" href="../auth-protocol/">
      Authentication Protocols
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Authentication Management" href="../auth-management/">
      Authentication Management
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Configuring Multi-Factor Authentication" href="../multi-factor-auth/">
      Configuring Multi-Factor Authentication
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Manage & Configure Users" href="../user-group/">
      Manage & Configure Users
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Log Management" href="../logs/">
      Log Management
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Configure and Manage OpenID Clients" href="../clients/">
      Configure and Manage OpenID Clients
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Configure and Manage SAML SSO" href="../saml/">
      Configure and Manage SAML SSO
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="OAuth2 Grants" href="../oauth2/">
      OAuth2 Grants
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="OpenID Connect" href="../openid-connect/">
      OpenID Connect
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="UMA" href="../uma/">
      UMA
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Attribute Management" href="../attribute/">
      Attribute Management
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="SCIM protected by UMA" href="../scim-uma/">
      SCIM protected by UMA
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Gluu Server APIs" href="../api/">
      Gluu Server APIs
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="SCIM API Configuration" href="../scim/">
      SCIM API Configuration
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="current" title="Service Integration in Gluu CE" href="./">
      Service Integration in Gluu CE
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Dropbox SSO with Gluu Server" href="#dropbox-sso-with-gluu-server">
                <b>Dropbox SSO with Gluu Server</b>
              </a>
            </li>
            
              <li class="anchor">
              <a title="Custom NameID" href="#custom-nameid">
                  <font size=2><i>Custom NameID</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Trust Relationship" href="#trust-relationship">
                  <font size=2><i>Trust Relationship</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Configure Gluu Server as IdP in Dropbox" href="#configure-gluu-server-as-idp-in-dropbox">
                  <font size=2><i>Configure Gluu Server as IdP in Dropbox</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Test SSO" href="#test-sso">
                  <font size=2><i>Test SSO</i></font>
              </a>
            </li>
             
          
            <li class="anchor">
              <a title="SAML SSO With Google Apps" href="#saml-sso-with-google-apps">
                <b>SAML SSO With Google Apps</b>
              </a>
            </li>
            
              <li class="anchor">
              <a title="Configuring Google Apps With Google Dashboard:" href="#configuring-google-apps-with-google-dashboard">
                  <font size=2><i>Configuring Google Apps With Google Dashboard:</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Configuration In Gluu Server:" href="#configuration-in-gluu-server">
                  <font size=2><i>Configuration In Gluu Server:</i></font>
              </a>
            </li>
             
          
            <li class="anchor">
              <a title="SAML SSO with Hobsons Education Solutions Co" href="#saml-sso-with-hobsons-education-solutions-co">
                <b>SAML SSO with Hobsons Education Solutions Co</b>
              </a>
            </li>
            
              <li class="anchor">
              <a title="Creating Trust Relationship" href="#creating-trust-relationship">
                  <font size=2><i>Creating Trust Relationship</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Configuring Trust Relationship" href="#configuring-trust-relationship">
                  <font size=2><i>Configuring Trust Relationship</i></font>
              </a>
            </li>
             
          
            <li class="anchor">
              <a title="OpenID Connect from JavaScript" href="#openid-connect-from-javascript">
                <b>OpenID Connect from JavaScript</b>
              </a>
            </li>
            
          
            <li class="anchor">
              <a title="Office 365 Integration with Gluu Server" href="#office-365-integration-with-gluu-server">
                <b>Office 365 Integration with Gluu Server</b>
              </a>
            </li>
            
              <li class="anchor">
              <a title="Office 365 Configuration" href="#office-365-configuration">
                  <font size=2><i>Office 365 Configuration</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Gluu Server Configuration" href="#gluu-server-configuration">
                  <font size=2><i>Gluu Server Configuration</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Custom Attributes" href="#custom-attributes">
                  <font size=2><i>Custom Attributes</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="OpenDJ Configuration" href="#opendj-configuration">
                  <font size=2><i>OpenDJ Configuration</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Identity Mapping" href="#identity-mapping">
                  <font size=2><i>Identity Mapping</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Create Trust Relationship" href="#create-trust-relationship">
                  <font size=2><i>Create Trust Relationship</i></font>
              </a>
            </li>
             
          
            <li class="anchor">
              <a title="Login with LifeRay" href="#login-with-liferay">
                <b>Login with LifeRay</b>
              </a>
            </li>
            
          
            <li class="anchor">
              <a title="SAML SSO with Salesforce.com" href="#saml-sso-with-salesforcecom">
                <b>SAML SSO with Salesforce.com</b>
              </a>
            </li>
            
              <li class="anchor">
              <a title="Prepare Salesforce.com" href="#prepare-salesforcecom">
                  <font size=2><i>Prepare Salesforce.com</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Prepare Gluu Server" href="#prepare-gluu-server">
                  <font size=2><i>Prepare Gluu Server</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Test SSO" href="#test-sso_1">
                  <font size=2><i>Test SSO</i></font>
              </a>
            </li>
             
          
            <li class="anchor">
              <a title="Cisco WebEx SSO" href="#cisco-webex-sso">
                <b>Cisco WebEx SSO</b>
              </a>
            </li>
            
              <li class="anchor">
              <a title="Attribute creation with oxTrust" href="#attribute-creation-with-oxtrust">
                  <font size=2><i>Attribute creation with oxTrust</i></font>
              </a>
            </li>
             
              <li class="anchor">
              <a title="Configuring attribute resolver" href="#configuring-attribute-resolver">
                  <font size=2><i>Configuring attribute resolver</i></font>
              </a>
            </li>
             
          
        </ul>
      
    
  </li>
                  
      
        
  <li>
    <a class="" title="Plugin Integration" href="../plugin/">
      Plugin Integration
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Backup Gluu Server CE" href="../backup/">
      Backup Gluu Server CE
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Custom Script in Gluu CE" href="../custom-script/">
      Custom Script in Gluu CE
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Certificate Management" href="../certificate/">
      Certificate Management
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Fine Tuning Gluu Server" href="../fine-tuning/">
      Fine Tuning Gluu Server
    </a>
    
  </li>
                  
      
        
  <li>
    <a class="" title="Troubleshooting & FAQ" href="../faq/">
      Troubleshooting & FAQ
    </a>
    
  </li>
                  
      
    </ul>
  </li>
                  
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="integration-guide">Integration Guide<a class="headerlink" href="#integration-guide" title="Permanent link">#</a></h1>
<h2 id="dropbox-sso-with-gluu-server">Dropbox SSO with Gluu Server<a class="headerlink" href="#dropbox-sso-with-gluu-server" title="Permanent link">#</a></h2>
<p>This document is a step-by-step guide to setting up Dropbox SSO in Gluu Server.
This SSO requires setting a custom <code>nameid</code> called <code>emailnid</code>.</p>
<h3 id="custom-nameid">Custom NameID<a class="headerlink" href="#custom-nameid" title="Permanent link">#</a></h3>
<p>Please see <a href="../attribute/">this doc</a> on how to create custom attributes.</p>
<p>The new attribute screen should look like the screenshot below
<img alt="image" src="../../img/admin-guide/integrate/emailnid.png" /></p>
<p>The custom <code>nameid</code> needs to be defined in the <code>attribute-resolver</code> template file.</p>
<ul>
<li>
<p>Please edit the <code>attribute-resolver.xml.vm</code> file  under the <code>/opt/tomcat/conf/shibboleth2/idp</code> folder</p>
</li>
<li>
<p>Add the <code>$attribute.name.equals('emailnid')</code> with the existing <em>#if( ! ($attribute.name.equals('transientId')</em> to look like the snippet below</p>
</li>
</ul>
<pre><code>#if( ! ($attribute.name.equals('transientId') or $attribute.name.equals('emailnid') ) ) 
</code></pre>

<ul>
<li>Add <code>nameid</code> definition </li>
</ul>
<pre><code> &lt;resolver:AttributeDefinition id=&quot;emailnid&quot;
                                xsi:type=&quot;Simple&quot;
                                xmlns=&quot;urn:mace:shibboleth:2.0:resolver:ad&quot;
                                sourceAttributeID=&quot;mail&quot;&gt;
                        &lt;resolver:Dependency ref=&quot;siteLDAP&quot; /&gt;
                        &lt;resolver:AttributeEncoder xsi:type=&quot;SAML2StringNameID&quot;
                                xmlns=&quot;urn:mace:shibboleth:2.0:attribute:encoder&quot;
                                nameFormat=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&quot; /&gt;
&lt;/resolver:AttributeDefinition&gt; 
</code></pre>

<ul>
<li>Add <code>emailAddress</code> in Principal Connector</li>
</ul>
<pre><code> &lt;resolver:PrincipalConnector xsi:type=&quot;pc:Transient&quot; id=&quot;saml2Transient&quot; nameIDFormat=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&quot; /&gt; 
</code></pre>

<ul>
<li>Restart Tomcat service</li>
</ul>
<h3 id="trust-relationship">Trust Relationship<a class="headerlink" href="#trust-relationship" title="Permanent link">#</a></h3>
<p>Please see <a href="../saml/">this doc</a> to create trust relationship and fill up the form with the following info</p>
<p>The metadata for Dropbox is necessary to create trust relationship. Please use the following snippet so create the <code>dropbox_metadata.xml</code>.</p>
<pre><code> &lt;EntityDescriptor entityID=&quot;Dropbox&quot; xmlns=&quot;urn:oasis:names:tc:SAML:2.0:metadata&quot;&gt;
    &lt;SPSSODescriptor protocolSupportEnumeration=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;&gt;
        &lt;NameIDFormat&gt;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&lt;/NameIDFormat&gt;
        &lt;AssertionConsumerService index=&quot;1&quot; Binding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; Location=&quot;https://www.dropbox.com/saml_login&quot; /&gt;
    &lt;/SPSSODescriptor&gt;
&lt;/EntityDescriptor&gt; 
</code></pre>

<ul>
<li>Display Name: Dropbox</li>
<li>Description: External SP / File method</li>
<li>Metadata Type: File</li>
<li>SP Metadata File: Upload the 'dropbox_metadata.xml' which you just created</li>
<li>Configure Specific RelyiningParty: Yes</li>
</ul>
<pre><code>signResponses: conditional
signAssertions: never
signRequests: conditional
encryptAssertions: never
encryptNameIds: never
</code></pre>

<p><img alt="image" src="../../img/admin-guide/integrate/rp_configuration.png" /></p>
<ul>
<li>Released attribute: emailnid
<img alt="image" src="../../img/admin-guide/integrate/dropboxtr.png" /></li>
</ul>
<h3 id="configure-gluu-server-as-idp-in-dropbox">Configure Gluu Server as IdP in Dropbox<a class="headerlink" href="#configure-gluu-server-as-idp-in-dropbox" title="Permanent link">#</a></h3>
<ul>
<li>Log into Dropbox</li>
<li>Click on <code>Admin Console</code></li>
<li>Click <code>Authentication</code></li>
<li>Click on the checkbox labeled <code>Enable single-sign-on</code></li>
<li>
<p>Optional/Required according to necessity</p>
<ul>
<li>
<p>Sign in URL
<code>https://&lt;hostname_of_Gluu_server&gt;/idp/profile/SAML2/Redirect/SSO</code></p>
</li>
<li>
<p>X.509 certificate </p>
</li>
</ul>
</li>
</ul>
<pre><code>    Get `shibIDP.crt` from Gluu Server `chroot` environment under `/etc/certs/` folder and upload it
</code></pre>

<p><img alt="image" src="../../img/admin-guide/integrate/dbadmin.png" /></p>
<ul>
<li>Save configuration</li>
</ul>
<h3 id="test-sso">Test SSO<a class="headerlink" href="#test-sso" title="Permanent link">#</a></h3>
<ul>
<li>
<p>Please go to https://www.dropbox.com and click on the <code>Sign In</code> button</p>
</li>
<li>
<p>If the account is configured for SSO, then a screen similar to the screenshot below will appear after entering the email address.
<img alt="image" src="../../img/admin-guide/integrate/dblogin.png" /></p>
</li>
<li>
<p>Click <code>Continue</code> and the website will redirect to Gluu Server for authentication.</p>
</li>
</ul>
<h2 id="saml-sso-with-google-apps">SAML SSO With Google Apps<a class="headerlink" href="#saml-sso-with-google-apps" title="Permanent link">#</a></h2>
<p>Google Apps will work as a Service Provider (SP) and we need to
"introduce" Gluu Server with Google Apps as Gluu Server so that it can
work as an Identity Provider (IDP).</p>
<p>NOTE: It is highly recommended to use Google staging apps setup before
Google production migration. If you have any question or confusion,
please feel free to let us know.</p>
<p>We need to configure Google Apps and Gluu Server so that both parties
can talk to each other.</p>
<h3 id="configuring-google-apps-with-google-dashboard">Configuring Google Apps With Google Dashboard:<a class="headerlink" href="#configuring-google-apps-with-google-dashboard" title="Permanent link">#</a></h3>
<ul>
<li>Login to dashboard.</li>
</ul>
<p><img alt="Image" src="../../img/admin-guide/integrate/admin_console.png" /></p>
<ul>
<li>
<p>From the list of options choose the "Security" tab.</p>
</li>
<li>
<p>A new page will open. Select <code>Set up single sign-on(SSO)</code> from the
options.</p>
</li>
</ul>
<p><img alt="Image" src="../../img/admin-guide/integrate/security_setting.png" /></p>
<ul>
<li>Finally, the Single Sign-On setting page will appear. </li>
</ul>
<p><img alt="Image" src="../../img/admin-guide/integrate/final_setup.png" /></p>
<p>This page contains a number of selection, and entry fields.</p>
<ul>
<li>
<p><strong>Setup SSO with third party Identity Provider</strong>: This
     refers to your Gluu Server instance. Enable this box.</p>
</li>
<li>
<p><strong>Sign-in Page URL</strong>: Enter the uri of the sign-in page, for
     example <code>https://idp_hostname/idp/profile/SAML2/Redirect/SSO</code>.</p>
</li>
<li>
<p><strong>Sign-out Page URL</strong>: Enter the uri of the logout page, for
     example <code>https://idp_hostname/idp/logout.jsp</code>.</p>
</li>
<li>
<p><strong>Change Password URL</strong>: The uri an user is redirected if he wants
     to change his password. It is recommended that an organization 
     provides such a link for its end users.</p>
</li>
<li>
<p><strong>Verification certificate</strong>: Upload the SAML certificate of your
     Gluu Server. The SAML certificates are available in the <code>/etc/certs</code> folder inside the Gluu Server <code>chroot</code> environment.</p>
</li>
<li>
<p><strong>Use a domain specific issuer</strong>: Enable this box to use a
     domain-specific issuer.</p>
</li>
<li>
<p>Save your data using the <code>Save changes</code> button on the lower right
     of the page.</p>
</li>
</ul>
<p>If you want to know more about Google SSO,
<a href="https://support.google.com/a/answer/60224?hl=en">this</a> helps you.</p>
<h3 id="configuration-in-gluu-server">Configuration In Gluu Server:<a class="headerlink" href="#configuration-in-gluu-server" title="Permanent link">#</a></h3>
<p>Now we need to create a Trust Relationship in Gluu Server. Trust
Relationships are created so that the IdP can authorize/authenticate the
user to the service provider (SP). In this specific case, the SP is
Google Apps, and the protocol used is SAML.</p>
<p>In order to create a Trust Relationship, we need to grab the metadata of
Google Apps. This metadata can be collected from Google. It's generally
specific to an organization account. The following is a template of the Google metadata.</p>
<pre><code>&lt;EntityDescriptor entityID=&quot;google.com/a/domain.com&quot; xmlns=&quot;urn:oasis:names:tc:SAML:2.0:metadata&quot;&gt;
&lt;SPSSODescriptor protocolSupportEnumeration=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;&gt;
&lt;NameIDFormat&gt;urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified&lt;/NameIDFormat&gt;
&lt;AssertionConsumerService index=&quot;1&quot; Binding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot;
Location=&quot;https://www.google.com/a/domain.com/acs&quot; &gt;&lt;/AssertionConsumerService&gt;
&lt;/SPSSODescriptor&gt;
&lt;/EntityDescriptor&gt;
</code></pre>

<p>Got the metadata? Great, we are ready to move forward. </p>
<ul>
<li>
<p>Create Trust Relationship for Google Apps: </p>
</li>
<li>
<p>How to create a trust relationship can be found <a href="../saml/">here</a>. We need to follow the "File" method for Google Apps trust relationship.</p>
<ul>
<li>Required attributes: Generally a nameID attributes is required. </li>
<li>Relying Party Configuration: Yes, SAML2SSO should be configured. <ul>
<li>includeAttributeStatement: check</li>
<li>assertionLifetime: default </li>
<li>assertionProxyCount: default</li>
<li>signResponses: conditional</li>
<li>signAssertions: never</li>
<li>signRequests: conditional</li>
<li>encryptAssertions: never</li>
<li>encryptNameIds: never </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="saml-sso-with-hobsons-education-solutions-co">SAML SSO with Hobsons Education Solutions Co<a class="headerlink" href="#saml-sso-with-hobsons-education-solutions-co" title="Permanent link">#</a></h2>
<p>This guide has been prepared to connect the Hobsons Service Provider
(SP) with the Gluu Server for SP-initiated SSO. The connection is
established through the creation of a Trust Relationship using the Gluu
Server UI, oxTrust.</p>
<h3 id="creating-trust-relationship">Creating Trust Relationship<a class="headerlink" href="#creating-trust-relationship" title="Permanent link">#</a></h3>
<ul>
<li>
<p>Log in to your Gluu Server using your admin credentials.</p>
</li>
<li>
<p>Next, click on the SAML tab, and select the option Trust
Relationships. Then, click on the <code>Add Relationship</code> button.</p>
</li>
</ul>
<p><img alt="Add Relationship" src="../../img/admin-guide/integrate/admin_saml_create.png" /></p>
<ul>
<li>The button <code>Add Relationship</code> will open the following page, the trust
relationship can be created easily using the following form.</li>
</ul>
<p><img alt="Add empty form" src="../../img/admin-guide/integrate/admin_saml_newTR.png" /></p>
<pre><code>1. __Display Name__: This field contains the display name of the 
Trust Relationship. In the example below we use “Test Hobsons-Radius TR”.

2. __Description__: A small description of Hobsons can be input here.

3. __Metadata Type__: Please select the uri from the dropdown menu.

4. __SP Metadata URL__: The metadata uri provided by Hobsons goes here.

5. __SP Logout URL__: This uri is meant to be supplied by the
Hobsons staff. If you did not receiv any logout uri yet, leave it blank.

6. __Released__: The two necessary attributes--`Transientid` and the
`eduPersonPrincipalName`--were selected from the attribute list.
</code></pre>
<p><img alt="hobsons-tr" src="../../img/admin-guide/integrate/hobsons-tr.jpg" /></p>
<pre><code>7. Finally, click "Add" to finish creating the Trust Relationship.
</code></pre>
<h3 id="configuring-trust-relationship">Configuring Trust Relationship<a class="headerlink" href="#configuring-trust-relationship" title="Permanent link">#</a></h3>
<p>Please ensure that the new Trust Relationship status is "active".
Otherwise click on the Trust Relationship, and activate it before
configuring it.</p>
<p><img alt="hobsons-tr-active" src="../../img/admin-guide/integrate/hobsons-tr-active.jpg" /></p>
<p>The configuration screen opens by clicking on the Hobsons Trust Relationship.</p>
<ol>
<li>
<p><strong>Configure Metadata Filters</strong>: Do not make any changes.</p>
</li>
<li>
<p><strong>Configure specific Relying Party</strong>: Check this option and a link "Configure Relying Party" will appear.</p>
</li>
<li>
<p><strong>Configure Relying Party</strong>: Click on the link, and a new window opens:</p>
<ul>
<li>
<p>Select SAML2SSO from the list and click on the "Add" button.</p>
</li>
<li>
<p>Set "signResponses", "signAssertions", "signRequests" and
"encryptAssertions" to <code>Conditional</code> from the drop-down menu.</p>
</li>
<li>
<p>Set "encryptNameIds" to <code>Never</code> from the drop-down menu, and click
"Save".</p>
</li>
</ul>
</li>
</ol>
<p><img alt="hobsons-tr-update" src="../../img/admin-guide/integrate/hobsons-tr-update.jpg" /></p>
<ol>
<li>Click "Update" to finish the configuration of the Trust Relationship.</li>
</ol>
<h2 id="openid-connect-from-javascript">OpenID Connect from JavaScript<a class="headerlink" href="#openid-connect-from-javascript" title="Permanent link">#</a></h2>
<p>See <a href="http://www.gluu.co/.qqh2">OpenID Connect plugin for Passport</a> for further details.</p>
<h2 id="office-365-integration-with-gluu-server">Office 365 Integration with Gluu Server<a class="headerlink" href="#office-365-integration-with-gluu-server" title="Permanent link">#</a></h2>
<p>This guide is created to use Microsoft Office 365 Single-Sign-On with Gluu Server.
It is assumed that an Office 365 subscription is available/registered.</p>
<p><strong>Note:</strong> The attributes <code>ObjectGUID</code> and <code>IDPEmail</code> are mandatory for O365 SSO. The domain of <code>IDPEmail</code> must match the registered domain as well.</p>
<h3 id="office-365-configuration">Office 365 Configuration<a class="headerlink" href="#office-365-configuration" title="Permanent link">#</a></h3>
<ol>
<li>
<p>Please create a test user from Office365 Admin Panel<br/>
   Alternatively, use <a href="https://azure.microsoft.com/en-us/documentation/articles/active-directory-aadconnect/">this doc</a> to connect backend Azure Active Directory (AD) </p>
</li>
<li>
<p>Register the domain from the Office365 (O365) Admin Panel from <strong>Settings --&gt; Domains</strong></p>
<ul>
<li><em>Verify</em> the domain</li>
</ul>
</li>
<li>
<p>Register Gluu Server in O365</p>
<ul>
<li>
<p>Install/Use Windows Server 2012 R2</p>
</li>
<li>
<p><a href="https://technet.microsoft.com/en-us/library/jj205464">Install and Configure</a> Windows Powershell <em>cmdlets</em></p>
</li>
<li>
<p>Create a script named <code>gluu1.ps1</code> with the following template changing domain, hostname of Gluu Server and Certificate</p>
</li>
</ul>
</li>
</ol>
<pre><code> Connect-MsolService

$dom = &quot;company.org&quot;
$url = &quot;https://test.gluu.org/idp/profile/SAML2/POST/SSO&quot;
$uri = &quot;https://test.gluu.org/idp/shibboleth&quot;
$logouturl = &quot;https://test.gluu.org/idp/logout.jsp&quot;
$cert = &quot;Mx....SAML_cert_of_your_Gluu_Server...Tdsg9R0XO3AnBeHRtGmAA=&quot;

Set-MsolDomainAuthentication -DomainName $dom -FederationBrandName $dom -Authentication Federated  -PassiveLogOnUri $url -SigningCertificate $cert -IssuerUri $uri -LogOffUri $logouturl -PreferredAuthenticationProtocol SAMLP 
</code></pre>

<ol>
<li>Run the <code>gluu.ps1</code> script from Windows Server 2012 R2</li>
</ol>
<h3 id="gluu-server-configuration">Gluu Server Configuration<a class="headerlink" href="#gluu-server-configuration" title="Permanent link">#</a></h3>
<h3 id="custom-attributes">Custom Attributes<a class="headerlink" href="#custom-attributes" title="Permanent link">#</a></h3>
<p>The configuration begins by creating a few custom attributes named <code>IDPEmail</code>, <code>ImmutableID</code> and <code>objectguid</code>.
Please see <a href="../attribute/">this doc</a> to create custom attributes.</p>
<ol>
<li>
<p><code>IDPEmail</code> Custom Attribute
<img alt="image" src="../../img/admin-guide/integrate/idpemail.png" /></p>
</li>
<li>
<p><code>ImmutableID</code> Custom Attribute
<img alt="image" src="../../img/admin-guide/integrate/immutableid.png" /></p>
</li>
<li>
<p><code>objectguid</code> Custom Attribute
<img alt="image" src="../../img/admin-guide/integrate/objectguid.png" /></p>
</li>
</ol>
<h3 id="opendj-configuration">OpenDJ Configuration<a class="headerlink" href="#opendj-configuration" title="Permanent link">#</a></h3>
<ol>
<li>
<p>Edit the <code>100-user.ldif</code> file under <code>/opt/opendj/config/schema</code> folder.</p>
<ul>
<li>
<p>Remove the <code>obhectGUID</code> entry from the file</p>
</li>
<li>
<p>Add the following new entry</p>
</li>
</ul>
</li>
</ol>
<pre><code>attributeTypes: ( 1454676848732 NAME 'objectGUID' SYNTAX 1.3.6.1.4.1.1466.115.121.1.5 USAGE userApplications X-ORIGIN 'gluu' ) 
</code></pre>

<pre><code>* Restart OpenDJ
</code></pre>
<ol>
<li>
<p>Edit the <code>attribute-resolver.xml.vm</code> file under <code>/opt/tomcat/conf/shibboleth2/idp</code> folder</p>
<ul>
<li>Add <code>$attribute.name.equals('ImmutableID')</code> with the existing <em>($attribute.name.equals('transientId')</em> to look like the snippet below</li>
</ul>
</li>
</ol>
<pre><code>#if(!($attribute.name.equals('transientId')or$attribute.name.equals('ImmutableID'))) 
</code></pre>

<pre><code>* Add `IDPEmail` attribute definition
</code></pre>
<pre><code> &lt;resolver:AttributeDefinition xsi:type=&quot;ad:Simple&quot; id=&quot;UserId&quot; sourceAttributeID=&quot;IDPEmail&quot;&gt;
                        &lt;resolver:Dependency ref=&quot;siteLDAP&quot; /&gt;
                        &lt;resolver:AttributeEncoder xsi:type=&quot;enc:SAML2String&quot; name=&quot;IDPEmail&quot; friendlyName=&quot;UserId&quot; /&gt;
        &lt;/resolver:AttributeDefinition&gt; 
</code></pre>

<pre><code>* Add `ImmutableID` attribute definition
</code></pre>
<pre><code> &lt;resolver:AttributeDefinition id=&quot;ImmutableID&quot; xsi:type=&quot;Simple&quot;
                              xmlns=&quot;urn:mace:shibboleth:2.0:resolver:ad&quot;
                              sourceAttributeID=&quot;objectguid&quot;&gt;

        &lt;resolver:Dependency ref=&quot;siteLDAP&quot;/&gt;
        &lt;resolver:AttributeEncoder xsi:type=&quot;SAML2StringNameID&quot;
                                xmlns=&quot;urn:mace:shibboleth:2.0:attribute:encoder&quot;
                                nameFormat=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:persistent&quot; /&gt;
&lt;/resolver:AttributeDefinition&gt; 
</code></pre>

<h3 id="identity-mapping">Identity Mapping<a class="headerlink" href="#identity-mapping" title="Permanent link">#</a></h3>
<p>The cache refresh mechanism is used to populate the Gluu Server LDAP with data from a backend LDAP/AD. The <code>objectGUID</code> attribute must be pulled from the backend data source to Gluu Server.</p>
<ul>
<li>Edit the <code>ox-ldap.properties</code>, <code>oxauth-ldap.properties</code> and <code>oxidp-ldap.properties</code> files to add the following</li>
</ul>
<pre><code>binaryAttributes=objectGUID,objectguid 
</code></pre>

<p><strong>Note:</strong>'objectGUID' (the first one) is the attribute which contains binary values in the backend AD and 'objectguid' (the second one) is the Gluu Server binary attribute name which will pull value from 'objectGUID' attribute</p>
<ul>
<li>Restart Tomcat</li>
</ul>
<h3 id="create-trust-relationship">Create Trust Relationship<a class="headerlink" href="#create-trust-relationship" title="Permanent link">#</a></h3>
<p>Please see <a href="../saml/">this doc</a> to create trust relationships.</p>
<ul>
<li>Configure Relaying Party like the following screenshot
<img alt="image" src="../../img/admin-guide/integrate/o365_trelationship.png" /></li>
</ul>
<h2 id="login-with-liferay">Login with LifeRay<a class="headerlink" href="#login-with-liferay" title="Permanent link">#</a></h2>
<ul>
<li>
<p>Server Bootup</p>
<ul>
<li>Once the LifeRay server is restarted, open your browser and
  navigate to the uri <code>http://localhost:8080</code>.</li>
</ul>
</li>
<li>
<p>Login uri</p>
<ul>
<li>Once the LifeRay page successfully loaded navigate to the OpenID
  connect page at <code>http://localhost:8080/openidconnect/login</code>.</li>
</ul>
</li>
</ul>
<p>Note: you can edit the theme code, and link to the login uri as
<code>http://localhost:8080/openidconnect/login</code>. In result the user will
always redirect to the OAuth server for authentication.</p>
<ul>
<li>OAuth authentication<ul>
<li>The LifeRay login uri will redirect users to the OAuth IdP server
  for user authentication. Internally, passing the oAuth client id 
  as the following screen:</li>
</ul>
</li>
</ul>
<p><img alt="oauth-login" src="https://raw.githubusercontent.com/GluuFederation/oxRay/master/img/oauth_login.jpg" /></p>
<ul>
<li>Request for permission<ul>
<li>This screen can be configured depending upon your OAuth Server
  implementation.</li>
</ul>
</li>
</ul>
<p><img alt="oauth_info_confirm" src="https://raw.githubusercontent.com/GluuFederation/oxRay/master/img/oauth_info_confirm.jpg" /></p>
<ul>
<li>OAuth callback (user auto-login to LifeRay)<ul>
<li>After a successful authentication with the OAuth server, IdP will
send a callback to LifeRay with a specific code as a parameter:</li>
</ul>
</li>
</ul>
<pre><code>http://localhost:8080/openidconnect/callback?code=xxx`
</code></pre>

<p>This will be intercepted by our oxAuth LifeRay plugin. Upon validation
of the token with the Gluu IdP, it will result in a login of the user to
the LifeRay. The user will be redirected to his respective start page.</p>
<p><img alt="liferay_success_login" src="https://raw.githubusercontent.com/GluuFederation/oxRay/master/img/liferay_success_login.jpg" /></p>
<h2 id="saml-sso-with-salesforcecom">SAML SSO with Salesforce.com<a class="headerlink" href="#saml-sso-with-salesforcecom" title="Permanent link">#</a></h2>
<p>By default Salesforce suggest deployers to implement IDP-initiated SSO.
The initialization of IDP-initiated SSO is little bit complex as it
requires a big hostname which includes IDP's SSO link as well as SP's
login uri. So we prefer SP-initiated SSO and here in this documentation
we are presenting a very simple SP-initiated SSO steps with Salesforce
and Gluu Server. Still, you can go for IDP-initiated SSO if you prefer.
Further documentation is available at the Salesforce.com site.</p>
<h3 id="prepare-salesforcecom">Prepare Salesforce.com<a class="headerlink" href="#prepare-salesforcecom" title="Permanent link">#</a></h3>
<ul>
<li>Log into Salesforce.com with your administrative account.</li>
<li>Click on <em>Setup</em> in the right upper corner of the page.</li>
<li>You need to add a custom domain name for your Salesforce.com site if
  you do not have any yet.</li>
<li>Go to <em>Domain Management</em> –&gt; <em>My Domain</em></li>
<li>Add your custom domain</li>
<li>Wait for some time. Salesforce.com will register this domain name
  for you. As an example we use <code>testgluu-dev-ed.my.salesforce.com</code> here.</li>
</ul>
<p><img alt="image" src="../../img/admin-guide/integrate/My_Domain.png" /></p>
<ul>
<li>Register your Gluu Server information in Salesforce.com</li>
<li>Go to <em>Security Controls</em> –&gt; <em>Single Sign On Settings</em></li>
<li>Click <em>New</em></li>
</ul>
<p><img alt="image" src="../../img/admin-guide/integrate/SSO_Settings.png" /></p>
<ul>
<li>
<p>Now you need to add the information of your Gluu Server here</p>
<ul>
<li><em>Name</em>: Anything, whichever is easier for you to recognize this
   setup, i.e. <code>Gluu Server</code></li>
<li><em>API Name</em>: Gluu Server.</li>
<li><em>Issuer</em>: EntityID of your Gluu Server, i.e. <code>https://test.gluu.org/idp/shibboleth</code></li>
<li><em>EntityID</em>: Your Salesforce.com custom domain name as chosen
   above, i.e. <code>https://testgluu-dev-ed.my.salesforce.com</code></li>
<li><em>Identity Provider Certificate</em>: Grab your Gluu Server's SAML
   certificate. SAML certificate can be grabbed from your Gluu Sever's
   metadata. Save the certificate and upload it.</li>
<li><em>Request Signing Certificate</em>: Default certificate</li>
<li><em>Request Signature Method</em>: RSA-SHA1</li>
<li><em>Assertion Decryption Certificate</em>: Assertion not encrypted.</li>
<li><em>SAML Identity Type</em>: Assertion contains user's Salesforce.com username</li>
<li><em>SAML Identity Location</em>: Identity is in an Attribute element</li>
<li><em>Attribute Name</em>: Provide 'SAML2 URI' of your attribute. For our test case we are using Gluu Server's Email attribute. How to check the information of your attribute is available <a href="http://www.gluu.org/docs/admin-guide/configuration/#attributes">here</a>.</li>
<li><em>NameID Format</em>: Leave this field empty.</li>
<li><em>Identity Provider Login URL</em>: <code>https://test.gluu.org/idp/profile/SAML2/Redirect/SSO</code></li>
<li><em>Service Provider Initiated Request Binding</em>: HTTP-Redirect</li>
<li>Here is how our example setup looks like:</li>
</ul>
<p><img alt="image" src="../../img/admin-guide/integrate/Final_setup.png" /></p>
</li>
</ul>
<h3 id="prepare-gluu-server">Prepare Gluu Server<a class="headerlink" href="#prepare-gluu-server" title="Permanent link">#</a></h3>
<ul>
<li>How to create SAML trust relationship is available <a href="../saml/">here</a>. </li>
<li>Grab Salesforce.com metadata from the Salesforce.com website. There is
  an option named 'Download Metadata':</li>
<li>Modify Salesforce.com metadata a bit:<ul>
<li>Remove <em>AuthnRequestsSigned=“true”</em> from metadata.</li>
<li>Save metadata</li>
</ul>
</li>
<li>Create Trust Relationship:</li>
<li><em>Display Name</em>: Anything, whichever is easier for you to recognize this trust relationship.</li>
<li><em>Description</em>: Anything, whichever is easier for you to recognize this trust relationship</li>
<li><em>Metadata Type</em>: 'File'</li>
<li>Upload salesforce's metadata (your modified one)</li>
<li>Releases attributes: TransientID and Email</li>
<li>'Add' this trust</li>
<li>Configure Specific Relying: It can be done from Gluu Server's GUI (named: oxTrust)<ul>
<li>Select 'SAML2SSO'<ul>
<li>includeAttributeStatement: Enabled</li>
<li>assertionLifetime: keep the default one</li>
<li>assertionProxyCount: keep the default one</li>
<li>signResponses: conditional</li>
<li>signAssertions: never</li>
<li>signRequests: conditional</li>
<li>encryptAssertions: never</li>
<li>encryptNameIds: never</li>
<li>Save it</li>
</ul>
</li>
</ul>
</li>
<li>'Update' the trust relationship</li>
<li>Here is how it looks like in our example setup:</li>
</ul>
<p><img alt="image" src="../../img/admin-guide/integrate/85cd191c-ddd0-11e5-922e-2195841e98a8.png" /></p>
<h3 id="test-sso_1">Test SSO<a class="headerlink" href="#test-sso_1" title="Permanent link">#</a></h3>
<ul>
<li>Go back to Salesforce.com setup</li>
<li>Security Controls –&gt; Single Sign On Settings</li>
<li>Enable 'Federated Single Sign-On Using SAML'</li>
<li>Go to 'Domain Management'</li>
<li>Configure 'Authentication Configuration'</li>
<li>Select 'Gluu Server'</li>
<li>Save it</li>
<li>Here is how the 'Authentication Configuration' looks like:</li>
</ul>
<p><img alt="image" src="../../img/admin-guide/integrate/Authentication_Configuration.png" /></p>
<ul>
<li>
<p>This is SP-initiate SSO. So hit your Salesforce.com website link to
initiate the SSO.</p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=VehuRJr647E&amp;feature=youtu.be">Here</a>
is a video link of this SSO.</p>
</li>
</ul>
<h2 id="cisco-webex-sso">Cisco WebEx SSO<a class="headerlink" href="#cisco-webex-sso" title="Permanent link">#</a></h2>
<h3 id="attribute-creation-with-oxtrust">Attribute creation with oxTrust<a class="headerlink" href="#attribute-creation-with-oxtrust" title="Permanent link">#</a></h3>
<ul>
<li>'WebexNameID'</li>
<li>Name: webexnameid</li>
<li>SAML1 URI: urn:gluu:dir:attribute-def:webexnameid</li>
<li>SAML2 URI: urn:oid:webexnameid</li>
<li>DisplayName: WebexNameID</li>
<li>Type: Text</li>
<li>Edit Type: admin</li>
<li>View Type: admin + user</li>
<li>Usage Type: Not definte</li>
<li>Multivalue: False</li>
<li>SCIM Attribute: False</li>
<li>Description: Custom nameID for WebEx, takes value from uid (through Shibboleth's config files)</li>
<li><img alt="WebexNameID attribute" src="../../img/admin-guide/integrate/webex_webexnameid.png" /></li>
<li>'wxemail'</li>
<li>Name: email_webex</li>
<li>SAML1 URI: email</li>
<li>SAML2 URI: email</li>
<li>DisplayName: wxemail</li>
<li>Type: Text</li>
<li>Edit type: admin</li>
<li>View type: admin + user</li>
<li>Usage type: Not defined</li>
<li>Multivalue: False</li>
<li>SCIM Attribute: False</li>
<li>Description: Custom attribute for WebEX SSO. Pulling email from backend. </li>
<li><img alt="wxemail" src="../../img/admin-guide/integrate/webex_wxemail.png" /></li>
<li>'wxfirstname'</li>
<li>Name: firstname_webex</li>
<li>SAML1 URI: firstname</li>
<li>SAML2 URI: firstname</li>
<li>Display Name: wxfirstname</li>
<li>Type: Text</li>
<li>Edit Type: admin</li>
<li>View Type: admin + user</li>
<li>Usage Type: Not defined</li>
<li>Multivalued: False</li>
<li>SCIM Attribute: False</li>
<li>Description: Custom attribute for WebEX SSO, pulling 'givenname' from backend. </li>
<li><img alt="wxfirstname" src="../../img/admin-guide/integrate/webex_wxfirstname.png" /></li>
<li>'wxlastname'</li>
<li>Name: lastname_webex</li>
<li>SAML1 URI: lastname</li>
<li>SAML2 URI: lastname</li>
<li>Display Name: wxlastname</li>
<li>Type: Text</li>
<li>Edit Type: admin</li>
<li>View Type: admin + user</li>
<li>Usage Type: Not defined</li>
<li>Multivalued: False</li>
<li>SCIM Attribute: False</li>
<li>Description: Custom attribute for WebEX SSO, pulling 'sn' from backend. </li>
<li><img alt="wxlastname" src="../../img/admin-guide/integrate/webex_wxlastname.png" /></li>
<li>'wxuid'</li>
<li>Name: uid_webex</li>
<li>SAML1 URI: uid</li>
<li>SAML2 URI: uid</li>
<li>Display Name: wxuid</li>
<li>Type: Text</li>
<li>Edit Type: admin</li>
<li>View Type: admin + user</li>
<li>Usage Type: Not defined</li>
<li>Multivalue: False</li>
<li>SCIM Attribute: False</li>
<li>Description: Custom attribute for WebEX SSO, pulling 'uid' from backend. </li>
<li><img alt="wxuid" src="../../img/admin-guide/integrate/webex_wxuid.png" /></li>
</ul>
<h3 id="configuring-attribute-resolver">Configuring attribute resolver<a class="headerlink" href="#configuring-attribute-resolver" title="Permanent link">#</a></h3>
<p>Add below snippets in 'attribute-resolver.xml.vm' ( location: /opt/tomcat/conf/shibboleth2/idp )</p>
<ul>
<li>Attribute definition: </li>
</ul>
<pre><code>#if( ! ($attribute.name.equals('transientId') or $attribute.name.equals('webexnameid') or $attribute.name.equals('webexnameidmail') or $attribute.name.equals('firstname_webex') or $attribute.name.equals('uid_webex') or $attribute.name.equals('lastname_webex') or $attribute.name.equals('email_webex')  ) )
</code></pre>

<ul>
<li>Attribute declaration: </li>
</ul>
<pre><code>&lt;resolver:AttributeDefinition xsi:type=&quot;ad:Simple&quot; id=&quot;firstname_webex&quot; sourceAttributeID=&quot;firstname_webex&quot;&gt;
        &lt;resolver:Dependency ref=&quot;siteLDAP&quot; /&gt;
        &lt;resolver:AttributeEncoder xsi:type=&quot;enc:SAML2String&quot; nameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified&quot; name=&quot;firstname&quot; /&gt;
    &lt;/resolver:AttributeDefinition&gt;

&lt;resolver:AttributeDefinition xsi:type=&quot;ad:Simple&quot; id=&quot;uid_webex&quot; sourceAttributeID=&quot;uid_webex&quot;&gt;
        &lt;resolver:Dependency ref=&quot;siteLDAP&quot; /&gt;
        &lt;resolver:AttributeEncoder xsi:type=&quot;enc:SAML2String&quot; nameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified&quot; name=&quot;uid&quot; /&gt;
    &lt;/resolver:AttributeDefinition&gt;

&lt;resolver:AttributeDefinition xsi:type=&quot;ad:Simple&quot; id=&quot;lastname_webex&quot; sourceAttributeID=&quot;lastname_webex&quot;&gt;
        &lt;resolver:Dependency ref=&quot;siteLDAP&quot; /&gt;
        &lt;resolver:AttributeEncoder xsi:type=&quot;enc:SAML2String&quot; nameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified&quot; name=&quot;lastname&quot; /&gt;
    &lt;/resolver:AttributeDefinition&gt;

&lt;resolver:AttributeDefinition xsi:type=&quot;ad:Simple&quot; id=&quot;email_webex&quot; sourceAttributeID=&quot;email_webex&quot;&gt;
        &lt;resolver:Dependency ref=&quot;siteLDAP&quot; /&gt;
        &lt;resolver:AttributeEncoder xsi:type=&quot;enc:SAML2String&quot; nameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified&quot; name=&quot;email&quot; /&gt;
    &lt;/resolver:AttributeDefinition&gt;

    &lt;resolver:AttributeDefinition id=&quot;webexnameid&quot;
                                      xsi:type=&quot;Simple&quot;
                                      xmlns=&quot;urn:mace:shibboleth:2.0:resolver:ad&quot;
                                      sourceAttributeID=&quot;uid&quot;&gt;
        &lt;resolver:Dependency ref=&quot;siteLDAP&quot; /&gt;
        &lt;resolver:AttributeEncoder xsi:type=&quot;SAML2StringNameID&quot;
                                   xmlns=&quot;urn:mace:shibboleth:2.0:attribute:encoder&quot;
                                   nameFormat=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified&quot;/&gt;
    &lt;/resolver:AttributeDefinition&gt;
</code></pre>

<ul>
<li>Restart tomcat</li>
</ul>
          <aside class="copyright" role="note">
           Built with 
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a> using
            <a href="http://gitlab.testbird.io:8099/frontend/testbird-mkdocs-theme.git" target="_blank">
              testBird-mkdocs-theme
            </a> <br>
            
            Copyright &copy; 2016, Gluu, Inc.
            
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../scim/" title="SCIM API Configuration">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                SCIM API Configuration
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../plugin/" title="Plugin Integration">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Plugin Integration
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = '';
    </script>
    <script src="../../assets/javascripts/application-ce3999cf34.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    
  </body>
</html>